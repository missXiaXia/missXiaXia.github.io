webpackJsonp([3],{"1UHf":function(e,t){},IC2B:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("mowP"),a={mixins:[{components:{vueUpload:i("hYS1").a},data:function(){var e=this;return{voice_id:"",voice_name:"",voice_album:"",voice_big_type:"-1",voice_small_type:"-1",voice_post_name:"",publish_begin_time:"",publish_end_time:"",user_level:"-1",pageSize:15,totalCount:0,loading:!0,bigTypeList:[],smallTypeList:[],voiceList:[],voiceColumns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:"声音ID",key:"voice_id",align:"center",fixed:"left",width:80},{title:"声音名称",key:"voice_name",align:"center",width:150},{title:"所属专辑",key:"album_name",align:"center",width:150},{title:"声音类别",align:"center",width:140,render:function(e,t){return"暂时无分类"==t.row.p_name?e("span","暂时无分类"):e("span",t.row.p_name+"/"+t.row.name)}},{title:"试听",align:"center",width:70,render:function(t,i){return i.row.final_voice_file_md5?t("Icon",{props:{type:"play"},style:{width:"30px",height:"30px",lineHeight:"30px"},on:{click:function(){e.playAudio(i)}}}):t("span","声音地址不存在")}},{title:"播放数",key:"play_count",align:"center",width:70},{title:"真实播放数",key:"real_play_count",align:"center",width:80},{title:"转发数",key:"forward_count",align:"center",width:70},{title:"喜欢数",key:"like_count",align:"center",width:70},{title:"评论数",key:"comment_count",align:"center",width:70},{title:"发布者昵称",key:"nickname",align:"center",width:100},{title:"发布者类型",align:"center",width:80,render:function(e,t){return e("span",Object(s.userLevel)(t.row.level,t.row.is_copyright_owner))}},{title:"发布时间",key:"release_time",align:"center",width:120,render:function(e,t){return e("span",Object(s.formatTime)(1e3*t.row.release_time,"YMDHMS"))}},{title:"推荐",align:"center",width:100,render:function(e,t){var i=[];return t.row.is_hot&&i.push("热门声音"),t.row.section_list.length>0&&i.push("一说APP专栏"),t.row.hw_app_section_list.length>0&&i.push("一说宝宝APP专栏"),e("span",i.length?"已推荐到："+i.join(","):"未推荐")}},{title:"操作",align:"center",fixed:"right",width:180,render:function(t,i){var s="none";return 0==i.row.level&&1!=i.row.is_copyright_owner||1e3*i.row.release_time<(new Date).getTime()&&(s="inline-block"),t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",display:s},on:{click:function(){e.recommendModalShow(i.row)}}},"推荐"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editModalShow(i.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteModalShow(i.row.voice_id)}}},"删除")])}}],editModal:!1,editVoiceInfo:{},edit_album_id:"-1",editConfigTagCount:3,userAlbumList:[],editVoiceCategory:"",edit_big_type:"-1",edit_small_type:"-1",editSmallTypeList:[],edit_tag_list:"",edit_secret_type:0,voice_img_list:[],recommendModal:!1,recommend_id:0,recommend_type:[],hasRecommendApp:!1,app_type:[],hasRecommendBabyApp:!1,baby_app_type:[],appTypeList:[],babyAppTypeList:[],sort_order:null,deleteModal:!1,delete_id:0,delete_id_list:"",showUpload:!1,uploadVoiceUrl:this.$api.uploadUrl+"voice/upload_voice",formVoiceData:{voice_file:"file"},voiceSingleSizeLimit:209715200,uploadImageUrl:this.$api.uploadUrl+"yishuo/api_web/upload/image",formImageData:{img:"file"},imageSingleSizeLimit:5242880}},created:function(){this.getVoicesList(),this.getCategoryList(),this.getAppTypeList(),this.getBabyAppTypeList(),this.getConfigTagCount()},methods:{getVoicesList:function(){var e=this,t={uuid:this.$api.uuid,page:this.currentPage,per_page:this.pageSize,last_request_time:this.last_request_time,voice_id:this.voice_id,voice_name:this.voice_name,album_name:this.voice_album,release_time_min:""==this.publish_begin_time?"":this.publish_begin_time.getTime()/1e3,release_time_max:""==this.publish_end_time?"":this.publish_end_time.getTime()/1e3,level:this.user_level};"-1"!=this.voice_big_type&&("-1"!=this.voice_small_type?t.category_id=this.voice_small_type:t.category_id=this.voice_big_type),this.$api.getVoiceList(t).then(function(t){e.loading=!1,200==t.code?(e.totalCount=t.data.total_count,e.currentPage=t.data.page,e.voiceList=t.data.list,e.last_request_time=t.data.last_request_time):e.$Message.error(t.msg)})},getCategoryList:function(e,t){var i=this,s={uuid:this.$api.uuid,p_id:e};this.$api.getCategoryList(s).then(function(s){200==s.code?null!=e?i.addModal||i.editModal?(i.editSmallTypeList=s.data.list,t&&(i.edit_small_type=t)):i.smallTypeList=s.data.list:i.bigTypeList=s.data.list:i.$Message.error("获取声音类别失败")})},getAppTypeList:function(){var e=this,t={uuid:this.$api.uuid,type:1};this.$api.getAppTypeList(t).then(function(t){200==t.code?e.appTypeList=t.data.list:e.$Message.error("获取一说APP专栏失败")})},getBabyAppTypeList:function(){var e=this,t={uuid:this.$api.uuid,type:3};this.$api.getAppTypeList(t).then(function(t){200==t.code?e.babyAppTypeList=t.data.list:e.$Message.error("获取一说宝宝APP专栏失败")})},getConfigTagCount:function(){var e=this,t={uuid:this.$api.uuid,type:1};this.$api.getConfigTagCount(t).then(function(t){200==t.code&&t.data.list[0].config&&(e.editConfigTagCount=t.data.list[0].config)})},getUserAlbumList:function(e,t){var i=this,s={uuid:this.$api.uuid,user_id:e};this.$api.getUserAlbumList(s).then(function(e){if(200==e.code){if(i.userAlbumList=e.data.list,t)if("暂无"!=t){i.edit_album_id=t;for(var s=0;s<i.userAlbumList.length;s++)t==i.userAlbumList[s].album_id&&(i.userAlbumList[s].category_id?(i.editVoiceCategory=i.userAlbumList[s].p_name+" / "+i.userAlbumList[s].category_name,i.edit_small_type=i.userAlbumList[s].category_id):i.editVoiceCategory="专辑无分类",i.edit_secret_type=i.userAlbumList[s].secret_type)}else i.editVoiceCategory=""}else i.$Message.error("获取用户专辑失败")})},bigTypeChange:function(e){"-1"==e?this.addModal||this.editModal?(this.edit_small_type="-1",this.editSmallTypeList=[]):(this.voice_small_type="-1",this.smallTypeList=[]):this.getCategoryList(e)},onImageSuccess:function(e,t){if(200==t.code){var i={ori_md5:t.data.split("/")[3].split(".")[0],img_url:this.$api.fileUrl+t.data};this.voice_img_list.push(i),3==this.voice_img_list.length&&$("#upload_edit_image").addClass("none")}else this.$Message.error(t.msg)},onImageError:function(e,t){this.$Message.error("上传图片失败，请重试")},error:function(e){this.$Message.error(e)},deleteVoice:function(e){var t=this,i={uuid:this.$api.uuid,voice_id_list:e};this.$api.deleteVoice(i).then(function(e){200==e.code?(t.$Message.success("删除成功"),t.loading=!0,t.last_request_time=0,t.getVoicesList()):t.$Message.error(e.msg)})},searchData:function(){if(""!=this.publish_begin_time){(new Date).getTime();if(this.publish_begin_time.getTime()>(new Date).getTime())return void this.$Message.error("开始时间不能大于当前日期");if(""!=this.publish_end_time&&this.publish_begin_time.getTime()>this.publish_end_time.getTime())return void this.$Message.error("开始时间不能大于结束时间")}this.currentPage=1,this.loading=!0,this.getVoicesList()},pageChange:function(e){this.currentPage=e,this.loading=!0},playAudio:function(e){$(".ivu-icon-play").css("color","#495060"),$(".ivu-icon-play").eq(e.index).css("color","#00ff00");var t=this.$api.fileUrl+"uploads/audio/voice/md5/"+e.row.final_voice_file_md5;document.getElementById("voicePlay").src=t},addModalShow:function(){},cancelAdd:function(){},confirmAdd:function(){},changeRecommend:function(e){this.hasRecommendApp=e.indexOf("2")>=0,this.hasRecommendBabyApp=e.indexOf("3")>=0},recommendModalShow:function(e){this.recommend_type=[],this.hasRecommendApp=!1,this.hasRecommendBabyApp=!1,this.app_type=[],this.baby_app_type=[],this.sort_order=null,this.recommendModal=!0,this.recommend_id=e.voice_id,e.is_hot&&this.recommend_type.push(1),e.section_list.length>0&&(this.recommend_type.push("2"),this.hasRecommendApp=!0,this.app_type=e.section_list),e.hw_app_section_list.length>0&&(this.recommend_type.push("3"),this.hasRecommendBabyApp=!0,this.baby_app_type=e.hw_app_section_list)},cancelRecommend:function(){this.recommendModal=!1},confirmRecommend:function(){var e=this;if(0==this.recommend_type.length)this.$Message.error("请选择推荐项");else{var t={uuid:this.$api.uuid,voice_id:this.recommend_id,recommend:this.recommend_type.join(","),section_type:this.app_type.join(","),hw_app_section_list:this.baby_app_type.join(","),sort_order:this.sort_order};this.$api.recommendVoice(t).then(function(t){e.recommendModal=!1,200==t.code?(e.$Message.success("推荐成功"),e.loading=!0,e.getVoicesList()):e.$Message.success(t.msg)})}},changeAlbum:function(e){if("-1"==e)this.editVoiceCategory="",this.edit_big_type="-1",this.edit_small_type="-1",this.edit_secret_type=0,this.editSmallTypeList=[];else for(var t=0;t<this.userAlbumList.length;t++)e==this.userAlbumList[t].album_id&&(this.userAlbumList[t].category_id?(this.editVoiceCategory=this.userAlbumList[t].p_name+" / "+this.userAlbumList[t].category_name,this.edit_small_type=this.userAlbumList[t].category_id):this.editVoiceCategory="专辑无分类",this.edit_secret_type=this.userAlbumList[t].secret_type)},deleteImag:function(e){this.voice_img_list.splice(e,1),this.voice_img_list.length<3&&$("#upload_edit_image").hasClass("none")&&$("#upload_edit_image").removeClass("none")},editModalShow:function(e){this.getUserAlbumList(e.user_id,e.album_id),this.editModal=!0,this.showUpload=!0,this.editVoiceCategory="",this.edit_big_type="-1",this.edit_small_type="-1",this.editVoiceInfo=e,e.p_id&&(this.edit_big_type=e.p_id,this.getCategoryList(this.edit_big_type,e.category_id)),this.edit_tag_list=e.tag_list.join(","),this.edit_secret_type=e.secret_type,this.voice_img_list=[];for(var t=0;t<e.pic_list.length;t++){var i={ori_md5:e.pic_list[t].ori_md5,img_url:this.$api.fileUrl+"uploads/images/voice/md5/"+e.pic_list[t].ori_md5+"."+e.pic_list[t].ext};if(this.voice_img_list.push(i),3==this.voice_img_list.length)return void $("#upload_edit_image").addClass("none")}},cancelEdit:function(){this.editModal=!1},confirmEdit:function(){var e=this;if(""!=this.editVoiceInfo.voice_name)if("-1"!=this.edit_small_type)if(this.edit_tag_list=this.edit_tag_list.replace(/，/g,","),this.edit_tag_list.split(",").length<=this.editConfigTagCount)if(this.voice_img_list.length){for(var t={uuid:this.$api.uuid,type:2,voice_id:this.editVoiceInfo.voice_id,voice_name:this.editVoiceInfo.voice_name,voice_path:null,album_id:"-1"==this.edit_album_id?"":this.edit_album_id,category_id:this.edit_small_type,voice_desc:this.editVoiceInfo.voice_desc,play_count:""==this.editVoiceInfo.play_count?"0":this.editVoiceInfo.play_count,tag_list:this.edit_tag_list,secret_type:this.edit_secret_type},i=0;i<this.voice_img_list.length;i++)0==i&&(t.cover_img=this.voice_img_list[i].img_url.split(this.$api.fileUrl)[1],t.cover_md5=this.voice_img_list[i].ori_md5),1==i&&(t.second_img=this.voice_img_list[i].img_url.split(this.$api.fileUrl)[1],t.second_md5=this.voice_img_list[i].ori_md5),2==i&&(t.third_img=this.voice_img_list[i].img_url.split(this.$api.fileUrl)[1],t.third_md5=this.voice_img_list[i].ori_md5);this.$api.editVoice(t).then(function(t){200==t.code?(e.$Message.success("修改成功"),e.editModal=!1,e.loading=!0,e.getVoicesList()):e.$Message.error(t.msg)})}else this.$Message.error("请上传声音配图");else this.$Message.error("标签个数不能超过设置个数");else this.$Message.error("请选择声音类别");else this.$Message.error("请填写声音名称")},deleteModalShow:function(e){this.deleteModal=!0,this.delete_id=e},cancelDelete:function(){this.deleteModal=!1},confirmDelete:function(){this.deleteModal=!1,this.deleteVoice(this.delete_id)},changeSelect:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].voice_id);this.delete_id_list=t.join(",")},deleteVoices:function(){""==this.delete_id_list?this.$Message.error("请选择要删除的数据"):this.deleteVoice(this.delete_id_list)},addVoices:function(){}}}]},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"userManage"},[i("div",{staticClass:"addBtn"},[i("Button",{staticClass:"marginBottom20",attrs:{type:"primary"},on:{click:e.addModalShow}},[e._v("添加声音")]),e._v(" "),i("Button",{staticClass:"marginBottom20",attrs:{type:"primary"},on:{click:e.addVoices}},[e._v("批量添加声音")]),e._v(" "),i("Button",{staticClass:"marginBottom20 fr marginRight30",attrs:{type:"error"},on:{click:e.deleteVoices}},[e._v("批量删除")])],1),e._v(" "),i("div",{staticClass:"searchVoiceData marginBottom30"},[i("div",[i("label",{attrs:{for:"voiceId"}},[e._v("声音ID")]),e._v(" "),i("Input",{attrs:{id:"voiceId"},model:{value:e.voice_id,callback:function(t){e.voice_id=t},expression:"voice_id"}})],1),e._v(" "),i("div",[i("label",{attrs:{for:"voiceName"}},[e._v("声音名称")]),e._v(" "),i("Input",{attrs:{id:"voiceName"},model:{value:e.voice_name,callback:function(t){e.voice_name=t},expression:"voice_name"}})],1),e._v(" "),i("div",[i("label",{attrs:{for:"voiceAlbum"}},[e._v("所属专辑")]),e._v(" "),i("Input",{attrs:{id:"voiceAlbum"},model:{value:e.voice_album,callback:function(t){e.voice_album=t},expression:"voice_album"}})],1),e._v(" "),i("div",[i("label",[e._v("声音类别")]),e._v(" "),i("Select",{staticClass:"searchSelect width200",on:{"on-change":e.bigTypeChange},model:{value:e.voice_big_type,callback:function(t){e.voice_big_type=t},expression:"voice_big_type"}},[i("Option",{key:"-1",attrs:{value:"-1"}},[e._v("全部")]),e._v(" "),e._l(e.bigTypeList,function(t){return i("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})],2),e._v(" "),i("Select",{staticClass:"searchSelect width200",model:{value:e.voice_small_type,callback:function(t){e.voice_small_type=t},expression:"voice_small_type"}},[i("Option",{key:"-1",attrs:{value:"-1"}},[e._v("全部")]),e._v(" "),e._l(e.smallTypeList,function(t){return i("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})],2)],1),e._v(" "),i("div",[i("label",{attrs:{for:"voicePostName"}},[e._v("发布者昵称")]),e._v(" "),i("Input",{attrs:{id:"voicePostName"},model:{value:e.voice_post_name,callback:function(t){e.voice_post_name=t},expression:"voice_post_name"}})],1),e._v(" "),i("div",[i("label",{attrs:{for:"publishTime"}},[e._v("发布时间")]),e._v(" "),i("DatePicker",{attrs:{type:"date",placeholder:"开始时间"},model:{value:e.publish_begin_time,callback:function(t){e.publish_begin_time=t},expression:"publish_begin_time"}}),e._v(" "),i("DatePicker",{attrs:{type:"date",placeholder:"结束时间"},model:{value:e.publish_end_time,callback:function(t){e.publish_end_time=t},expression:"publish_end_time"}})],1),e._v(" "),i("div",[i("label",{attrs:{for:"userLevel"}},[e._v("发布者类型")]),e._v(" "),i("Select",{staticClass:"searchSelect width200",attrs:{id:"userLevel"},model:{value:e.user_level,callback:function(t){e.user_level=t},expression:"user_level"}},[i("Option",{key:"-1",attrs:{value:"-1"}},[e._v("全部")]),e._v(" "),i("Option",{key:"0",attrs:{value:"0"}},[e._v("普通用户")]),e._v(" "),i("Option",{key:"1",attrs:{value:"1"}},[e._v("电台")]),e._v(" "),i("Option",{key:"2",attrs:{value:"2"}},[e._v("资源账号")]),e._v(" "),i("Option",{key:"3",attrs:{value:"3"}},[e._v("版权方")])],1)],1),e._v(" "),i("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.searchData}},[e._v("查询")])],1),e._v(" "),i("audio",{staticStyle:{top:"178px"},attrs:{id:"voicePlay",autoplay:"",controls:""}}),e._v(" "),i("Table",{staticClass:"clear",attrs:{stripe:"",border:"",loading:e.loading,columns:e.voiceColumns,data:e.voiceList},on:{"on-selection-change":e.changeSelect}}),e._v(" "),i("Page",{staticClass:"paging",attrs:{total:e.totalCount,"page-size":e.pageSize,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}}),e._v(" "),[i("Modal",{attrs:{title:"编辑声音"},model:{value:e.editModal,callback:function(t){e.editModal=t},expression:"editModal"}},[i("div",{staticClass:"alignCenter editVoicePop"},[i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("声音ID：")]),e._v(" "),i("Input",{staticClass:"editVoiceInput",attrs:{disabled:""},model:{value:e.editVoiceInfo.voice_id,callback:function(t){e.$set(e.editVoiceInfo,"voice_id",t)},expression:"editVoiceInfo.voice_id"}})],1),e._v(" "),i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("声音名称：")]),e._v(" "),i("Input",{staticClass:"editVoiceInput",model:{value:e.editVoiceInfo.voice_name,callback:function(t){e.$set(e.editVoiceInfo,"voice_name",t)},expression:"editVoiceInfo.voice_name"}})],1),e._v(" "),i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("所属专辑：")]),e._v(" "),i("Select",{staticClass:"searchSelect editVoiceInput",staticStyle:{width:"353px"},on:{"on-change":e.changeAlbum},model:{value:e.edit_album_id,callback:function(t){e.edit_album_id=t},expression:"edit_album_id"}},[i("Option",{key:"-1",attrs:{value:"-1"}},[e._v("请选择")]),e._v(" "),e._l(e.userAlbumList,function(t){return i("Option",{key:t.album_id,attrs:{value:t.album_id}},[e._v(e._s(t.album_name))])})],2)],1),e._v(" "),i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("声音类别：")]),e._v(" "),""!=e.editVoiceCategory?i("span",{staticStyle:{"line-height":"32px"}},[e._v(e._s(e.editVoiceCategory))]):e._e(),e._v(" "),""==e.editVoiceCategory?i("div",{staticClass:"flex"},[i("Select",{staticClass:"searchSelect",staticStyle:{width:"170px"},on:{"on-change":e.bigTypeChange},model:{value:e.edit_big_type,callback:function(t){e.edit_big_type=t},expression:"edit_big_type"}},[i("Option",{key:"-1",attrs:{value:"-1"}},[e._v("全部")]),e._v(" "),e._l(e.bigTypeList,function(t){return i("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})],2),e._v(" "),i("Select",{staticClass:"searchSelect marginLeft10",staticStyle:{width:"170px"},model:{value:e.edit_small_type,callback:function(t){e.edit_small_type=t},expression:"edit_small_type"}},[i("Option",{key:"-1",attrs:{value:"-1"}},[e._v("全部")]),e._v(" "),e._l(e.editSmallTypeList,function(t){return i("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})],2)],1):e._e()]),e._v(" "),i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("声音描述：")]),e._v(" "),i("Input",{staticClass:"editVoiceInput",attrs:{type:"textarea",placeholder:"300个字以内",maxlength:300,autosize:{minRows:2,maxRows:7}},model:{value:e.editVoiceInfo.voice_desc,callback:function(t){e.$set(e.editVoiceInfo,"voice_desc",t)},expression:"editVoiceInfo.voice_desc"}})],1),e._v(" "),i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("播放数：")]),e._v(" "),i("Input",{staticClass:"editVoiceInput",model:{value:e.editVoiceInfo.play_count,callback:function(t){e.$set(e.editVoiceInfo,"play_count",t)},expression:"editVoiceInfo.play_count"}})],1),e._v(" "),i("div",{staticClass:"flex"},[i("label",{staticClass:"showLabel"},[e._v("标签：")]),e._v(" "),i("Input",{staticClass:"editVoiceInput",attrs:{placeholder:"标签之间用英文逗号隔开"},model:{value:e.edit_tag_list,callback:function(t){e.edit_tag_list=t},expression:"edit_tag_list"}})],1),e._v(" "),i("p",{staticClass:"marginBottom10",staticStyle:{"margin-left":"-130px"}},[e._v("标签个数不能超过"+e._s(e.editConfigTagCount)+"个")]),e._v(" "),i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("隐私设置：")]),e._v(" "),i("RadioGroup",{staticStyle:{"line-height":"32px"},model:{value:e.edit_secret_type,callback:function(t){e.edit_secret_type=t},expression:"edit_secret_type"}},[i("Radio",{attrs:{label:0}},[e._v("公开-所有人可见")]),e._v(" "),i("Radio",{attrs:{label:1}},[e._v("私密-仅自己可见")])],1)],1),e._v(" "),i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("更改配图：")]),e._v(" "),e._l(e.voice_img_list,function(t,s){return i("div",{staticClass:"voice_img marginRight10"},[i("img",{attrs:{src:t.img_url}}),e._v(" "),i("Icon",{staticClass:"delete_img",attrs:{type:"ios-close",size:"20"},on:{click:function(t){return e.deleteImag(s)}}})],1)}),e._v(" "),i("span",{staticClass:"marginLeft10 marginTop10",attrs:{id:"upload_edit_image"}},[e._v("上传图片")]),e._v(" "),e.showUpload?i("div",[i("vue-upload",{ref:"uploader",attrs:{uploadButton:"#upload_edit_image",url:e.uploadImageUrl,formData:e.formImageData,accept:"image"},on:{success:e.onImageSuccess,uploadError:e.onImageError,error:e.error}})],1):e._e()],2)]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:e.cancelEdit}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"success"},on:{click:e.confirmEdit}},[e._v("保存")])],1)])],e._v(" "),[i("Modal",{attrs:{title:"推荐声音"},model:{value:e.recommendModal,callback:function(t){e.recommendModal=t},expression:"recommendModal"}},[i("div",{staticClass:"alignCenter recommendPop"},[i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("推荐版块：")]),e._v(" "),i("CheckboxGroup",{staticClass:"showCheckbox",on:{"on-change":e.changeRecommend},model:{value:e.recommend_type,callback:function(t){e.recommend_type=t},expression:"recommend_type"}},[i("Checkbox",{attrs:{label:"1"}},[e._v("热门声音")]),e._v(" "),i("Checkbox",{attrs:{label:"2"}},[e._v("一说APP版块")]),e._v(" "),i("Checkbox",{attrs:{label:"3"}},[e._v("一说宝宝APP版块")])],1)],1),e._v(" "),e.hasRecommendApp?i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel",staticStyle:{width:"240px"}},[e._v("一说APP版块：")]),e._v(" "),i("CheckboxGroup",{staticClass:"showCheckbox",model:{value:e.app_type,callback:function(t){e.app_type=t},expression:"app_type"}},e._l(e.appTypeList,function(t){return i("Checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1):e._e(),e._v(" "),e.hasRecommendBabyApp?i("div",{staticClass:"flex marginBottom10"},[i("label",{staticClass:"showLabel"},[e._v("一说宝宝APP版块：")]),e._v(" "),i("CheckboxGroup",{staticClass:"showCheckbox",model:{value:e.baby_app_type,callback:function(t){e.baby_app_type=t},expression:"baby_app_type"}},e._l(e.babyAppTypeList,function(t){return i("Checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1):e._e(),e._v(" "),i("div",{staticClass:"flex"},[i("label",{staticClass:"showLabel",attrs:{for:"sortOrder"}},[e._v("序号：")]),e._v(" "),i("InputNumber",{attrs:{id:"sortOrder",min:0,precision:0},model:{value:e.sort_order,callback:function(t){e.sort_order=t},expression:"sort_order"}})],1)]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:e.cancelRecommend}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"success"},on:{click:e.confirmRecommend}},[e._v("推荐")])],1)])],e._v(" "),[i("Modal",{attrs:{title:"删除声音"},model:{value:e.deleteModal,callback:function(t){e.deleteModal=t},expression:"deleteModal"}},[i("div",{staticClass:"alignCenter"},[i("p",[e._v("确认删除该声音？")])]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:e.cancelDelete}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"error"},on:{click:e.confirmDelete}},[e._v("删除")])],1)])]],2)},staticRenderFns:[]};var l=i("C7Lr")(a,o,!1,function(e){i("qEiF")},null,null);t.default=l.exports},hYS1:function(e,t,i){"use strict";var s={name:"vue-upload",props:{accept:{type:String,default:""},url:{type:String,default:""},fileNumLimit:{type:Number,default:100},fileSingleSizeLimit:{type:Number,default:5242880},formData:{type:Object,default:null},keyGenerator:{type:Function,default:function(e){return(new Date).getTime()+"."+e.name}},multiple:{type:Boolean,default:!1},uploadButton:{type:String,default:""}},data:function(){return{uploader:null}},mounted:function(){this.initWebUpload()},methods:{initWebUpload:function(){var e=this;this.uploader=WebUploader.create({auto:!0,swf:"/static/third_lib/webuploader/Uploader.swf",server:this.url,pick:{id:this.uploadButton,multiple:this.multiple,label:""},accept:this.getAccept(this.accept),threads:1,fileNumLimit:this.fileNumLimit,fileSingleSizeLimit:this.fileSingleSizeLimit,formData:this.formData,chunked:!0,chunkSize:2048e3,duplicate:!1,compress:!1}),this.uploader.on("beforeFileQueued",function(t){e.$emit("beforeFileChange",t)}),this.uploader.on("fileQueued",function(t){e.$emit("fileChange",t)}),this.uploader.on("uploadStart",function(t){e.$emit("start",t)}),this.uploader.on("uploadProgress",function(t,i){e.$emit("progress",t,i)}),this.uploader.on("uploadSuccess",function(t,i){e.$emit("success",t,i)}),this.uploader.on("uploadError",function(t,i){e.$emit("uploadError",t,i)}),this.uploader.on("error",function(t){var i="";i="F_EXCEED_SIZE"===t?"文件大小不能超过"+e.fileSingleSizeLimit/1024e3+"M":"Q_EXCEED_NUM_LIMIT"===t?"文件上传已达到最大上限数":"上传出错！请检查后重新上传！错误代码"+t,console.log("errorMessage="+i),e.$emit("error",i)}),this.uploader.on("uploadComplete",function(t,i){console.log(i),e.$emit("complete",t,i)})},upload:function(e){this.uploader.upload(e)},stop:function(e){this.uploader.stop(e)},cancelFile:function(e){this.uploader.cancelFile(e)},removeFile:function(e,t){this.uploader.removeFile(e,t)},getAccept:function(e){switch(e){case"text":return{title:"Texts",exteensions:"doc,docx,xls,xlsx,ppt,pptx,pdf,txt",mimeTypes:".doc,docx,.xls,.xlsx,.ppt,.pptx,.pdf,.txt"};case"video":return{title:"Videos",extensions:"mp3,wma,ogg,m4a,amr",mimeTypes:"audio/*,audio/amr-wb"};case"image":return{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"};default:return e}}}},a={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vue-upload"})},staticRenderFns:[]};var o=i("C7Lr")(s,a,!1,function(e){i("1UHf")},null,null);t.a=o.exports},qEiF:function(e,t){}});