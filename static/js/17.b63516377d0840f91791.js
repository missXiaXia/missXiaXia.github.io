webpackJsonp([17],{c4Ra:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mowP"),o={mixins:[{data:function(){var e=this;return{pageSize:15,currentPage:1,last_request_time:0,labelName:"",totalCount:0,loading:!0,labelRecommendList:[],labelRecommendColum:[{title:"序号",key:"sort_order",align:"center"},{title:"标签名称",key:"tag_name",align:"center"},{title:"标签下声音数",key:"voice_count",align:"center"},{title:"创建时间",key:"create_time",align:"center",render:function(e,t){return e("span",Object(l.formatTime)(1e3*t.row.create_time,"YMDHMS"))}},{title:"操作",key:"action",width:180,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editModalShow(a.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteModalShow(a.row.tag_name)}}},"删除")])}}],editModel:!1,edit_label_name:"",sort_order:null,deleteModal:!1,delete_label_name:""}},created:function(){this.getLabelRecommend()},methods:{getLabelRecommend:function(){var e=this,t={uuid:this.$api.uuid,page:this.currentPage,per_page:this.pageSize,last_request_time:this.last_request_time,tag_name:this.labelName};this.$api.getLabelRecommend(t).then(function(t){e.loading=!1,200==t.code?(e.totalCount=t.data.total_count,e.currentPage=t.data.page,e.labelRecommendList=t.data.list,e.last_request_time=t.data.last_request_time):e.$Message.error(t.msg)})},searchData:function(){this.currentPage=1,this.loading=!0,this.getLabelRecommend()},pageChange:function(e){this.currentPage=e,this.loading=!0,this.getLabelRecommend()},editModalShow:function(e){this.editModel=!0,this.edit_label_name=e.tag_name,this.sort_order=e.sort_order},cancelEdit:function(){this.editModel=!1,this.edit_label_name=""},confirmEdit:function(){var e=this;if(null==this.sort_order)this.$Message.error("请输入排序");else{var t={uuid:this.$api.uuid,tag_name:this.edit_label_name,sort_order:this.sort_order};this.$api.editLabelRecommend(t).then(function(t){200==t.code?(e.$Message.success("修改成功"),e.editModel=!1,e.edit_label_name="",e.loading=!0,e.getLabelRecommend()):e.$Message.error(t.msg)})}},deleteModalShow:function(e){this.deleteModal=!0,this.delete_label_name=e},cancelDelete:function(){this.deleteModal=!1,this.delete_label_name=""},confirmDelete:function(){var e=this,t={uuid:this.$api.uuid,tag_name:this.delete_label_name};this.deleteModal=!1,this.$api.deleteLabelRecommend(t).then(function(t){200==t.code?(e.$Message.success("删除成功"),e.deleteModal=!1,e.delete_label_name="",e.currentPage=1,e.loading=!0,e.getLabelRecommend()):e.$Message.error("删除失败")})}}}]},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"labelRecommend"},[a("div",{staticClass:"marginBottom30 flex clear"},[a("div",[a("label",{attrs:{for:"labelName"}},[e._v("标签名称")]),e._v(" "),a("Input",{attrs:{id:"labelName",placeholder:"查询标签名称"},model:{value:e.labelName,callback:function(t){e.labelName=t},expression:"labelName"}})],1),e._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.searchData}},[e._v("查询")])],1),e._v(" "),a("Table",{attrs:{stripe:"",border:"",loading:e.loading,columns:e.labelRecommendColum,data:e.labelRecommendList}}),e._v(" "),a("Page",{staticClass:"paging",attrs:{total:e.totalCount,"page-size":e.pageSize,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}}),e._v(" "),[a("Modal",{attrs:{title:"标签编辑"},model:{value:e.editModel,callback:function(t){e.editModel=t},expression:"editModel"}},[a("div",{staticClass:"alignCenter"},[a("p",{staticClass:"popupShow"},[a("label",{staticClass:"showLabel"},[e._v("标签名称：")]),e._v(" "),a("Input",{attrs:{disabled:""},model:{value:e.edit_label_name,callback:function(t){e.edit_label_name=t},expression:"edit_label_name"}})],1),e._v(" "),a("p",{staticClass:"popupShow"},[a("label",{staticClass:"showLabel",attrs:{for:"sortOrder"}},[e._v("序号：")]),e._v(" "),a("InputNumber",{attrs:{id:"sortOrder",min:0,precision:0},model:{value:e.sort_order,callback:function(t){e.sort_order=t},expression:"sort_order"}})],1)]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"borderNone",on:{click:e.cancelEdit}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"success"},on:{click:e.confirmEdit}},[e._v("确认")])],1)])],e._v(" "),[a("Modal",{attrs:{title:"删除标签推荐"},model:{value:e.deleteModal,callback:function(t){e.deleteModal=t},expression:"deleteModal"}},[a("div",{staticClass:"alignCenter"},[a("p",[e._v("确认删除该标签推荐？")])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"borderNone",on:{click:e.cancelDelete}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"error"},on:{click:e.confirmDelete}},[e._v("删除")])],1)])]],2)},staticRenderFns:[]};var n=a("C7Lr")(o,i,!1,function(e){a("tt6K")},null,null);t.default=n.exports},tt6K:function(e,t){}});