webpackJsonp([12],{BR1a:function(e,t){},F6TC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mowP"),l={mixins:[{data:function(){var e=this;return{pageSize:15,currentPage:1,last_request_time:0,albumId:"",albumName:"",totalCount:0,loading:!0,albumRecommendList:[],albumRecommendColum:[{title:"序号",key:"sort_order",align:"center"},{title:"专辑ID",key:"album_id",align:"center"},{title:"专辑名称",key:"album_name",align:"center"},{title:"专辑描述",key:"album_desc",align:"center",width:220},{title:"被订阅数",key:"subscribe_count",align:"center"},{title:"被收听数",key:"real_play_count",align:"center"},{title:"创建者昵称",key:"nickname",align:"center"},{title:"创建时间",key:"create_time",align:"center",render:function(e,t){return e("span",Object(i.formatTime)(1e3*t.row.create_time,"YMDHMS"))}},{title:"最后更新时间",key:"last_update_time",align:"center",render:function(e,t){return e("span",Object(i.formatTime)(1e3*t.row.last_update_time,"YMDHMS"))}},{title:"操作",key:"action",width:180,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editModalShow(a.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteModalShow(a.row.id)}}},"删除")])}}],editModel:!1,edit_id:0,edit_albumId:0,sort_order:null,deleteModal:!1,delete_id:0}},created:function(){this.getAlbumRecommend()},methods:{getAlbumRecommend:function(){var e=this,t={uuid:this.$api.uuid,page:this.currentPage,per_page:this.pageSize,last_request_time:this.last_request_time,album_id:this.albumId,album_name:this.albumName};this.$api.getAlbumRecommend(t).then(function(t){e.loading=!1,200==t.code?(e.totalCount=t.data.total_count,e.currentPage=t.data.page,e.albumRecommendList=t.data.list,e.last_request_time=t.data.last_request_time):e.$Message.error(t.msg)})},searchData:function(){this.currentPage=1,this.loading=!0,this.getAlbumRecommend()},pageChange:function(e){this.currentPage=e,this.loading=!0,this.getAlbumRecommend()},editModalShow:function(e){this.editModel=!0,this.edit_id=e.id,this.edit_albumId=e.album_id,this.sort_order=e.sort_order},cancelEdit:function(){this.editModel=!1,this.edit_id=0},confirmEdit:function(){var e=this;if(null==this.sort_order)this.$Message.error("请输入排序");else{var t={uuid:uuid,id:this.edit_id,sort_order:this.sort_order};this.$api.editAlbumRecommend(t).then(function(t){200==t.code?(e.$Message.success("修改成功"),e.editModel=!1,e.edit_id=0,e.loading=!0,e.getAlbumRecommend()):e.$Message.error(t.msg)})}},deleteModalShow:function(e){this.deleteModal=!0,this.delete_id=e},cancelDelete:function(){this.deleteModal=!1,this.delete_id=0},confirmDelete:function(){var e=this,t={uuid:uuid,id:this.delete_id};this.deleteModal=!1,this.$api.deleteAlbumRecommend(t).then(function(t){200==t.code?(e.$Message.success("删除成功"),e.deleteModal=!1,e.delete_id=0,e.currentPage=1,e.loading=!0,e.getAlbumRecommend()):e.$Message.error("删除失败")})}}}]},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"albumRecommend"},[a("div",{staticClass:"marginBottom30 flex clear"},[a("div",[a("label",{attrs:{for:"albumId"}},[e._v("专辑ID")]),e._v(" "),a("Input",{attrs:{id:"albumId",placeholder:"查询专辑ID"},model:{value:e.albumId,callback:function(t){e.albumId=t},expression:"albumId"}})],1),e._v(" "),a("div",[a("label",{attrs:{for:"albumName"}},[e._v("专辑名称")]),e._v(" "),a("Input",{attrs:{id:"albumName",placeholder:"查询专辑名称"},model:{value:e.albumName,callback:function(t){e.albumName=t},expression:"albumName"}})],1),e._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.searchData}},[e._v("查询")])],1),e._v(" "),a("Table",{attrs:{stripe:"",border:"",loading:e.loading,columns:e.albumRecommendColum,data:e.albumRecommendList}}),e._v(" "),a("Page",{staticClass:"paging",attrs:{total:e.totalCount,"page-size":e.pageSize,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}}),e._v(" "),[a("Modal",{attrs:{title:"专辑编辑"},model:{value:e.editModel,callback:function(t){e.editModel=t},expression:"editModel"}},[a("div",{staticClass:"alignCenter"},[a("p",{staticClass:"popupShow"},[a("label",{staticClass:"showLabel"},[e._v("专辑ID：")]),e._v(" "),a("Input",{attrs:{disabled:""},model:{value:e.edit_albumId,callback:function(t){e.edit_albumId=t},expression:"edit_albumId"}})],1),e._v(" "),a("p",{staticClass:"popupShow"},[a("label",{staticClass:"showLabel",attrs:{for:"sortOrder"}},[e._v("序号：")]),e._v(" "),a("InputNumber",{attrs:{id:"sortOrder",min:0,precision:0},model:{value:e.sort_order,callback:function(t){e.sort_order=t},expression:"sort_order"}})],1)]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"borderNone",on:{click:e.cancelEdit}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"success"},on:{click:e.confirmEdit}},[e._v("确认")])],1)])],e._v(" "),[a("Modal",{attrs:{title:"删除专辑推荐"},model:{value:e.deleteModal,callback:function(t){e.deleteModal=t},expression:"deleteModal"}},[a("div",{staticClass:"alignCenter"},[a("p",[e._v("确认删除该专辑推荐？")])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"borderNone",on:{click:e.cancelDelete}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"error"},on:{click:e.confirmDelete}},[e._v("删除")])],1)])]],2)},staticRenderFns:[]};var n=a("C7Lr")(l,o,!1,function(e){a("BR1a")},null,null);t.default=n.exports}});