webpackJsonp([2],{"1UHf":function(t,e){},"3cXf":function(t,e,i){t.exports={default:i("NUnD"),__esModule:!0}},NUnD:function(t,e,i){var a=i("/KQr"),s=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},R3h1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("3cXf"),s=i.n(a),r=i("mowP"),l={mixins:[{inject:["reload"],components:{vueUpload:i("hYS1").a},data:function(){var t=this;return{gift_id:null,gift_name:null,putaway_status:"-1",currentPage:1,pageSize:15,totalCount:0,giftDataList:[],giftColum:[{type:"selection",width:60,align:"center",_disabled:!0},{title:"礼物ID",key:"gift_id",align:"center"},{title:"礼物名称",key:"gift_name",align:"center"},{title:"价格(爱豆)",key:"gift_price",align:"center"},{title:"排序",key:"gift_order",align:"center"},{title:"附带百宝箱名称",key:"adjunct_box_name",align:"center"},{title:"上架状态",key:"putaway_status",align:"center",render:function(t,e){return t("span",Object(r.putawayStatus)(e.row.putaway_status))}},{title:"操作",key:"action",align:"center",render:function(e,i){var a="";return 1==i.row.gift_type?a="编辑礼物":2==i.row.gift_type&&(a="编辑宝箱"),e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){console.log(i.row),t.showEditModal(i.row)}}},a),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showGiftDetail(i.row)}}},"查看")])}}],treasureGiftList:[],treasureGiftColum:[{title:"礼物ID",key:"one_gift_id",align:"center"},{title:"礼物名称",key:"one_gift_name",align:"center"},{title:"礼物数量",key:"one_gift_number",align:"center"},{title:"操作",key:"action",align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){console.log(i.row),t.deleteTreasureGift(i.row.one_gift_id)}}},"删除")])}}],treasureDetailColum:[{title:"礼物ID",key:"one_gift_id",align:"center"},{title:"礼物名称",key:"one_gift_name",align:"center"},{title:"礼物数量",key:"one_gift_number",align:"center"}],chooseGiftList:[],addGiftModal:!1,addTresureModal:!1,showGiftDetailModal:!1,showTreasureDetailModal:!1,giftType:null,giftId:null,giftEffectList:[],giftSpecialList:[],giftList:[],treasureList:[],giftDetailModer:{},treasureDetailModer:{},modalTitle:"",editGift:!1,editTreasure:!1,editImg:!1,giftModer:{uuid:this.$api.uuid,gift_level:null,gift_order:"",gift_name:"",gift_picture_path:"",gift_price:"",adjunct_box_id:null,count_down:"",gift_special_effects:null,gift_trigger_effects:null,gift_trigger_effects_time:null,putaway_status:""},treasureModer:{uuid:this.$api.uuid,gift_level:null,gift_order:"",gift_name:"",gift_picture_path:"",gift_price:"",adjunct_box_id:null,count_down:"",gift_special_effects:null,gift_trigger_effects:null,gift_trigger_effects_time:null,putaway_status:"",gift_list:""},treasureGift:{one_gift_id:"",one_gift_name:"",one_gift_number:"",one_gift_price:""},chooseGiftId:null,giftCount:"",giftPrice:0,editTreasureGift:!1,addToTreasure:!1,showUploadTreasure:!1,showUploadGift:!1,voiceSingleSizeLimit:209715200,uploadUrl:this.$api.uploadUrl+"yishuo/api_web/upload/image",formData:{img:"file"},imgUrl:this.$api.fileUrl}},created:function(){this.getGiftList()},methods:{getGiftList:function(){var t=this,e={uuid:this.$api.uuid,gift_id:this.gift_id,gift_name:this.gift_name,putaway_status:"-1"==this.putaway_status?null:this.putaway_status,page:this.currentPage,per_page:this.pageSize};this.$api.getGiftList(e).then(function(e){if(200==e.code){t.giftDataList=e.data.list;for(var i=0;i<t.giftDataList.length;i++)2!=t.giftDataList[i].gift_type&&""==t.giftDataList[i].adjunct_box_name||(t.giftDataList[i]._disabled=!0);t.totalCount=e.data.total_count,t.currentPage=e.data.page}else t.$Message.error(e.msg)})},searchData:function(){this.currentPage=1,this.getGiftList()},pageChange:function(t){this.currentPage=t,this.getGiftList()},refreshPage:function(){this.reload()},initParam:function(t){"gift"==t?this.giftModer={gift_level:null,gift_order:"",gift_name:"",gift_picture_path:"",gift_price:"",adjunct_box_id:null,count_down:"",gift_special_effects:null,gift_trigger_effects:null,gift_trigger_effects_time:null,putaway_status:"",gift_list:""}:"treasure"==t&&(this.treasureModer={gift_level:null,gift_order:"",gift_name:"",gift_picture_path:"",gift_price:"",adjunct_box_id:null,count_down:"",gift_special_effects:null,gift_trigger_effects:null,gift_trigger_effects_time:null,putaway_status:"",gift_list:""})},showEditModal:function(t){1==t.gift_type?(this.editGift=!0,this.giftType=1,this.showModal("gift")):2==t.gift_type&&(this.editTreasure=!0,this.giftType=2,this.showModal("treasure")),this.getGiftOtherInfo(t)},showModal:function(t){var e={gift_id:null,gift_type:null};if("gift"==t)this.addGiftModal=!0,this.giftType=1,this.editGift?(this.modalTitle="编辑礼物",$("#uploadGiftImg .webuploader-pick").text("更换图片")):this.modalTitle="添加礼物",this.showUploadGift=!0,this.getGiftEffects(),this.getGiftAndTReasure();else if("treasure"==t){if(this.addTresureModal=!0,this.giftType=2,this.showUploadTreasure=!0,this.getGiftEffects(),this.getGiftAndTReasure(),this.editTreasure?(this.modalTitle="编辑宝箱",$("#uploadGiftImg .webuploader-pick").text("更换图片")):this.modalTitle="添加宝箱",this.chooseGiftList.length){this.giftType=1,this.addToTreasure=!0;for(var i=0;i<this.chooseGiftList.length;i++)e.gift_id=this.chooseGiftList[i].gift_id,e.gift_type=this.chooseGiftList[i].gift_type,this.getGiftOtherInfo(e),e={}}console.log(this.giftType),console.log(this.chooseGiftList)}},getGiftOtherInfo:function(t){var e=this,i={uuid:this.$api.uuid,gift_id:t.gift_id,gift_type:t.gift_type};this.$api.getGiftOtherInfo(i).then(function(t){200==t.code?(1==e.giftType?(e.giftModer=t.data,e.giftModer.putaway_status=e.giftModer.putaway_status.toString(),e.addToTreasure&&(console.log("多选数组"+e.chooseGiftList.length),e.chooseGiftList.length&&(e.giftCount=1),e.treasureGift.one_gift_id=t.data.gift_id,e.treasureGift.one_gift_name=t.data.gift_name,console.log("礼物数量"+e.giftCount),e.treasureGift.one_gift_number=parseInt(e.giftCount),e.treasureGift.one_gift_price=t.data.gift_price,e.treasureGiftList.push(e.treasureGift),e.treasureGift={},e.countGiftPrice(e.treasureGiftList))):2==e.giftType&&(e.treasureModer=t.data,e.treasureGiftList=t.data.gifts,e.countGiftPrice(e.treasureGiftList),e.treasureModer.putaway_status=e.treasureModer.putaway_status.toString()),e.chooseGiftId=null,e.giftCount=""):e.$Message.error(t.msg)})},getGiftEffects:function(){var t=this,e={uuid:this.$api.uuid,gift_type:this.giftType};this.$api.getGiftEffect(e).then(function(e){200==e.code?(t.giftEffectList=e.special_list,t.giftSpecialList=e.tragger_special_list,console.log(t.giftEffectList)):t.$Message.error(e.msg)})},getGiftAndTReasure:function(){var t=this,e={uuid:this.$api.uuid,gift_id:this.giftId};this.$api.getGiftAndTreasure(e).then(function(e){200==e.code?(t.treasureList=e.treasure_box_list,t.giftList=e.gift_list):t.$Message.error(e.msg)})},fileChange:function(t){console.log(t),t.size},onStart:function(t){console.log(t),this.$Message.success("开始上传前触发")},onSuccess:function(t,e){this.$Message.success("上传成功"),200==e.code&&(this.addGiftModal?(this.giftModer.gift_picture_path=e.data,$("#uploadGiftImg .webuploader-pick").text("更换图片")):this.addTresureModal&&(this.treasureModer.gift_picture_path=e.data,$("#uploadTreasureImg .webuploader-pick").text("更换图片")))},onError:function(t,e){this.$Message.error("上传出错")},error:function(t){this.$Message.error("上传失败")},complete:function(t,e){this.$Message.success("不管成功或者失败，文件上传完成时触发")},deleteImg:function(t){"gift"==t?(this.giftModer.gift_picture_path="",$("#uploadGiftImg .webuploader-pick").text("上传图片")):"treasure"==t&&(this.treasureModer.gift_picture_path="",$("#uploadTreasureImg .webuploader-pick").text("上传图片"))},cancelEdit:function(t){"gift"==t?(this.addGiftModal=!1,this.initParam("gift"),this.editGift=!1):"treasure"==t&&(this.addTresureModal=!1,this.editTreasure=!1,this.initParam("treasure"),this.treasureGiftList=[],this.giftPrice=0,this.editTreasureGift=!1),$("#uploadGiftImg .webuploader-pick").text("上传图片"),$("#uploadTreasureImg .webuploader-pick").text("上传图片")},checkIsEmpty:function(t){return"number"==typeof t||""!=t},checkGiftAll:function(){return!!(this.giftModer.gift_level&&this.checkIsEmpty(this.giftModer.gift_order)&&this.giftModer.gift_name&&this.giftModer.gift_picture_path&&this.checkIsEmpty(this.giftModer.gift_price)&&this.giftModer.gift_special_effects&&this.checkIsEmpty(this.giftModer.putaway_status))&&(!this.giftModer.adjunct_box_id||!!this.checkIsEmpty(this.giftModer.count_down))},checkTreasureAll:function(){return!!(this.treasureModer.gift_level&&this.checkIsEmpty(this.treasureModer.gift_order)&&this.treasureModer.gift_name&&this.treasureModer.gift_picture_path&&this.treasureModer.gift_special_effects&&this.checkIsEmpty(this.treasureModer.putaway_status))},confirmEditGift:function(){var t=this,e=this.giftModer;if(e.uuid=this.$api.uuid,this.checkAll()){if(this.giftModer.gift_order<0||this.giftModer.gift_price<0)return this.$Message.error("礼物排序和价格不能为负数！"),!1;this.editGift?this.$api.editGiftTreasure(e).then(function(e){200==e.code?(t.$Message.success("编辑礼物成功！"),t.addGiftModal=!1,t.initParam("gift"),t.getGiftList()):t.$Message.error(e.msg)}):this.$api.addGift(e).then(function(e){200==e.code?(t.$Message.success("添加礼物成功！"),t.addGiftModal=!1,t.initParam("gift"),t.getGiftList()):t.$Message.error(e.msg)})}else this.$Message.error("请将必填参数填写完整！")},giftSelect:function(t){console.log(t),t&&(this.chooseGiftList=t)},countGiftPrice:function(t){this.giftPrice=0;for(var e=0;e<t.length;e++)this.giftPrice+=t[e].one_gift_price*t[e].one_gift_number;var i=this.giftPrice;String(i).indexOf(".")>-1&&(this.giftPrice=this.giftPrice.toFixed(1)),this.editTreasureGift=!1},checkGiftSelect:function(){if(this.chooseGiftId)for(var t=0;t<this.treasureGiftList.length;t++)this.treasureGiftList[t].one_gift_id==this.chooseGiftId&&(this.giftCount=this.treasureGiftList[t].one_gift_number,this.editTreasureGift=!0)},addGiftSure:function(){this.addToTreasure=!0,this.giftType=1;var t={gift_id:this.chooseGiftId,gift_type:1},e={};if(this.editTreasureGift){for(var i=0;i<this.treasureGiftList.length;i++)this.treasureGiftList[i].one_gift_id==this.chooseGiftId&&(this.treasureGiftList[i].one_gift_number=parseInt(this.giftCount),e=this.treasureGiftList[i],this.treasureGiftList.splice(i,1,e),this.countGiftPrice(this.treasureGiftList));console.log(this.treasureGiftList),this.chooseGiftId=null,this.giftCount=""}else this.getGiftOtherInfo(t)},deleteTreasureGift:function(t){if(t)for(var e=0;e<this.treasureGiftList.length;e++)this.treasureGiftList[e].one_gift_id==t&&(this.treasureGiftList.splice(e,1),this.countGiftPrice(this.treasureGiftList))},confirmEditTreasure:function(){var t=this,e=this.treasureModer;return e.uuid=this.$api.uuid,console.log(e),this.checkTreasureAll()?this.treasureModer.gift_order<0?(this.$Message.error("宝箱排序不能为负数！"),!1):void(this.editTreasure?(e.gift_list=s()(e.gifts),e.gift_price=this.giftPrice,delete e.gifts,this.$api.editGiftTreasure(e).then(function(e){200==e.code?(t.$Message.success("编辑宝箱成功！"),t.addTresureModal=!1,t.initParam("treasure"),t.treasureGiftList=[],t.giftPrice=0,t.getGiftList()):t.$Message.error(e.msg)})):(e.gift_list=s()(this.treasureGiftList),e.gift_price=this.giftPrice,this.$api.addTreasure(e).then(function(e){200==e.code?(t.$Message.success("添加宝箱成功！"),t.addTresureModal=!1,t.initParam("treasure"),t.treasureGiftList=[],t.chooseGiftList=[],t.giftPrice=0,t.getGiftList()):t.$Message.error(e.msg)}))):(this.$Message.error("请将必填参数填写完整！"),!1)},showGiftDetail:function(t){var e=this;1==t.gift_type?this.showGiftDetailModal=!0:2==t.gift_type&&(this.showTreasureDetailModal=!0);var i={uuid:this.$api.uuid,gift_id:t.gift_id,gift_type:t.gift_type};this.$api.getGiftDetail(i).then(function(i){200==i.code?1==t.gift_type?e.giftDetailModer=i.data:2==t.gift_type&&(e.treasureDetailModer=i.data):e.$Message.error(i.msg)})},cancelDetail:function(t){"gift"==t?this.showGiftDetailModal=!1:"treasure"==t&&(this.showTreasureDetailModal=!1)}}}]},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"giftList"},[i("div",{staticClass:"but"},[i("Button",{staticClass:"fr marginRight30",attrs:{type:"primary"},on:{click:t.refreshPage}},[t._v("刷新")])],1),t._v(" "),i("div",{staticClass:"marginBottom30 flex clear"},[i("div",{staticClass:"flex"},[i("label",{staticClass:"searchLabel",attrs:{for:"giftId"}},[t._v("礼物ID:")]),t._v(" "),i("Input",{attrs:{id:"giftId",placeholder:"查询礼物ID"},model:{value:t.gift_id,callback:function(e){t.gift_id=e},expression:"gift_id"}})],1),t._v(" "),i("div",[i("label",{staticClass:"searchLabel",attrs:{for:"giftName"}},[t._v("礼物名称:")]),t._v(" "),i("Input",{attrs:{id:"giftName",placeholder:"查询礼物名称"},model:{value:t.gift_name,callback:function(e){t.gift_name=e},expression:"gift_name"}})],1),t._v(" "),i("div",{staticClass:"flex"},[i("label",{staticClass:"searchLabel",attrs:{for:"putawayStatus"}},[t._v("上架状态:")]),t._v(" "),i("Select",{staticClass:"searchSelect",attrs:{id:"putawayStatus"},model:{value:t.putaway_status,callback:function(e){t.putaway_status=e},expression:"putaway_status"}},[i("Option",{attrs:{value:"-1"}},[t._v("全部")]),t._v(" "),i("Option",{attrs:{value:"0"}},[t._v("未上架")]),t._v(" "),i("Option",{attrs:{value:"1"}},[t._v("已上架")])],1)],1),t._v(" "),i("Button",{staticClass:"searchBtn",attrs:{type:"primary",icon:"ios-search"},on:{click:t.searchData}},[t._v("查询")])],1),t._v(" "),i("div",{staticClass:"setButton"},[i("Button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:function(e){return t.showModal("gift")}}},[t._v("添加礼物")]),t._v(" "),i("Button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:function(e){return t.showModal("treasure")}}},[t._v("添加宝箱")])],1),t._v(" "),i("Table",{attrs:{stripe:"",border:"",columns:t.giftColum,data:t.giftDataList},on:{"on-selection-change":t.giftSelect}}),t._v(" "),i("Page",{staticClass:"paging",attrs:{total:t.totalCount,"page-size":t.pageSize,"show-total":"","show-elevator":""},on:{"on-change":t.pageChange}}),t._v(" "),[i("modal",{attrs:{title:"添加礼物"},on:{"on-ok":t.confirmEditGift,"on-cancel":function(e){return t.cancelEdit("gift")}},model:{value:t.addGiftModal,callback:function(e){t.addGiftModal=e},expression:"addGiftModal"}},[i("Form",{attrs:{model:t.giftModer,"label-width":80}},[i("div",{staticClass:"alignLeft"},[i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("礼物等级"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.giftModer.gift_level,expression:"giftModer.gift_level"}],staticClass:"searchSelect modalSelect",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.giftModer,"gift_level",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"1"}},[t._v("初级礼物")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("中级礼物")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("高级礼物")])])]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("礼物排序"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("Input",{staticClass:"modalInput",model:{value:t.giftModer.gift_order,callback:function(e){t.$set(t.giftModer,"gift_order",e)},expression:"giftModer.gift_order"}}),t._v(" "),i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("礼物名称"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("Input",{staticClass:"modalInput",attrs:{id:"gift_name"},model:{value:t.giftModer.gift_name,callback:function(e){t.$set(t.giftModer,"gift_name",e)},expression:"giftModer.gift_name"}})],1),t._v(" "),i("div",{staticClass:"marginBottom30",staticStyle:{position:"relative"}},[i("label",{staticClass:"searchLabel uploadImgLabel"},[t._v("上传礼物图片"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("div",{attrs:{id:"uploadGiftImg"}},[t._v("上传图片")]),t._v(" "),t.showUploadGift?i("div",[i("vue-upload",{ref:"uploader",attrs:{uploadButton:"#uploadGiftImg",url:t.uploadUrl,formData:t.formData,multiple:"",accept:"image"},on:{fileChange:t.fileChange,start:t.onStart,success:t.onSuccess,uploadError:t.onError,error:t.error}})],1):t._e(),t._v(" "),i("div",{staticClass:"ImgAndCover"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.giftModer.gift_picture_path,expression:"giftModer.gift_picture_path"}],staticClass:"uploadImgPic",attrs:{src:t.imgUrl+t.giftModer.gift_picture_path}}),t._v(" "),i("div",{staticClass:"imgCover"},[i("span",{on:{click:function(e){return t.deleteImg("gift")}}},[t._v("删除图片")])])]),t._v(" "),i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("礼物价格"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("Input",{staticClass:"modalInput",attrs:{id:"gift_name"},model:{value:t.giftModer.gift_price,callback:function(e){t.$set(t.giftModer,"gift_price",e)},expression:"giftModer.gift_price"}})],1),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("附带百宝箱:")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.giftModer.adjunct_box_id,expression:"giftModer.adjunct_box_id"}],staticClass:"searchSelect modalSelect",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.giftModer,"adjunct_box_id",e.target.multiple?i:i[0])}}},t._l(t.treasureList,function(e){return i("option",{domProps:{value:e.box_id}},[t._v(t._s(e.box_name))])}),0),t._v(" "),i("label",{directives:[{name:"show",rawName:"v-show",value:t.giftModer.adjunct_box_id,expression:"giftModer.adjunct_box_id"}],staticClass:"searchLabel"},[t._v("倒计时"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("Input",{directives:[{name:"show",rawName:"v-show",value:t.giftModer.adjunct_box_id,expression:"giftModer.adjunct_box_id"}],staticClass:"modalInput",model:{value:t.giftModer.count_down,callback:function(e){t.$set(t.giftModer,"count_down",e)},expression:"giftModer.count_down"}})],1),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("礼物特效"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.giftModer.gift_special_effects,expression:"giftModer.gift_special_effects"}],staticClass:"searchSelect modalSelect",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.giftModer,"gift_special_effects",e.target.multiple?i:i[0])}}},t._l(t.giftEffectList,function(e){return i("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}),0),t._v(" "),i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("礼物触发特效:")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.giftModer.gift_trigger_effects,expression:"giftModer.gift_trigger_effects"}],staticClass:"searchSelect modalSelect",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.giftModer,"gift_trigger_effects",e.target.multiple?i:i[0])}}},t._l(t.giftEffectList,function(e){return i("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}),0)]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("触发礼物数量个数:")]),t._v(" "),i("Input",{staticClass:"modalInput",model:{value:t.giftModer.gift_trigger_effects_time,callback:function(e){t.$set(t.giftModer,"gift_trigger_effects_time",e)},expression:"giftModer.gift_trigger_effects_time"}}),t._v(" "),i("label",{staticClass:"searchLabel"},[t._v("是否上架"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("RadioGroup",{model:{value:t.giftModer.putaway_status,callback:function(e){t.$set(t.giftModer,"putaway_status",e)},expression:"giftModer.putaway_status"}},[i("Radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),i("Radio",{attrs:{label:"0"}},[t._v("否")])],1)],1),t._v(" "),i("div",{staticClass:"marginBottom30",staticStyle:{"margin-left":"10px"}},[t._v("\n\t          \t\t\t\t(注：选择了百宝箱时，不要选择礼物触发特效和触发特效礼物数量。)\n\t          \t\t\t")])])]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:function(e){return t.cancelEdit("gift")}}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"success"},on:{click:t.confirmEditGift}},[t._v("确认")])],1)],1)],t._v(" "),[i("modal",{attrs:{title:t.modalTitle},on:{"on-ok":function(e){return t.confirmEditGift("treasure")},"on-cancel":function(e){return t.cancelEdit("treasure")}},model:{value:t.addTresureModal,callback:function(e){t.addTresureModal=e},expression:"addTresureModal"}},[i("Form",{attrs:{model:t.giftModer,"label-width":80}},[i("div",{staticClass:"alignLeft"},[i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("礼物等级"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.treasureModer.gift_level,expression:"treasureModer.gift_level"}],staticClass:"searchSelect modalSelect",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.treasureModer,"gift_level",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"1"}},[t._v("初级礼物")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("中级礼物")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("高级礼物")])])]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("宝箱排序"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("Input",{staticClass:"modalInput",model:{value:t.treasureModer.gift_order,callback:function(e){t.$set(t.treasureModer,"gift_order",e)},expression:"treasureModer.gift_order"}}),t._v(" "),i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("宝箱名称"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("Input",{staticClass:"modalInput",attrs:{id:"gift_name"},model:{value:t.treasureModer.gift_name,callback:function(e){t.$set(t.treasureModer,"gift_name",e)},expression:"treasureModer.gift_name"}})],1),t._v(" "),i("div",{staticClass:"marginBottom30",staticStyle:{position:"relative"}},[i("label",{staticClass:"searchLabel uploadImgLabel"},[t._v("上传宝箱图片"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("div",{attrs:{id:"uploadTreasureImg"}},[t._v("上传图片")]),t._v(" "),t.showUploadTreasure?i("div",[i("vue-upload",{ref:"uploader",attrs:{uploadButton:"#uploadTreasureImg",url:t.uploadUrl,formData:t.formData,multiple:"",accept:"image"},on:{fileChange:t.fileChange,start:t.onStart,success:t.onSuccess,uploadError:t.onError,error:t.error}})],1):t._e(),t._v(" "),i("div",{staticClass:"ImgAndCover"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.treasureModer.gift_picture_path,expression:"treasureModer.gift_picture_path"}],staticClass:"uploadImgPic",attrs:{src:t.imgUrl+t.treasureModer.gift_picture_path}}),t._v(" "),i("div",{staticClass:"imgCover"},[i("span",{on:{click:function(e){return t.deleteImg("treasure")}}},[t._v("删除图片")])])]),t._v(" "),i("label",{staticClass:"searchLabel"},[t._v("宝箱关闭特效"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.treasureModer.gift_special_effects,expression:"treasureModer.gift_special_effects"}],staticClass:"searchSelect modalSelect",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.treasureModer,"gift_special_effects",e.target.multiple?i:i[0])}}},t._l(t.giftEffectList,function(e){return i("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}),0)]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("宝箱打开特效:")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.treasureModer.gift_trigger_effects,expression:"treasureModer.gift_trigger_effects"}],staticClass:"searchSelect modalSelect",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.treasureModer,"gift_trigger_effects",e.target.multiple?i:i[0])}}},t._l(t.giftEffectList,function(e){return i("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}),0),t._v(" "),i("label",{staticClass:"searchLabel"},[t._v("是否上架"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("RadioGroup",{model:{value:t.treasureModer.putaway_status,callback:function(e){t.$set(t.treasureModer,"putaway_status",e)},expression:"treasureModer.putaway_status"}},[i("Radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),i("Radio",{attrs:{label:"0"}},[t._v("否")])],1)],1),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("添加礼物:")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.chooseGiftId,expression:"chooseGiftId"}],staticClass:"searchSelect modalSelect",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.chooseGiftId=e.target.multiple?i:i[0]},t.checkGiftSelect]}},t._l(t.giftList,function(e){return i("option",{domProps:{value:e.gift_id}},[t._v(t._s(e.gift_name))])}),0),t._v(" "),i("Input",{staticClass:"modalInput",attrs:{placeholder:"请输入礼物数量"},model:{value:t.giftCount,callback:function(e){t.giftCount=e},expression:"giftCount"}}),t._v(" "),i("Button",{attrs:{type:"success"},on:{click:t.addGiftSure}},[t._v("确定")])],1),t._v(" "),i("div",{staticStyle:{"font-size":"18px"}},[t._v("合计："+t._s(t.giftPrice)+"元")]),t._v(" "),i("Table",{attrs:{stripe:"",border:"",columns:t.treasureGiftColum,data:t.treasureGiftList}})],1)]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:function(e){return t.cancelEdit("treasure")}}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"success"},on:{click:t.confirmEditTreasure}},[t._v("确认")])],1)],1)],t._v(" "),[i("modal",{attrs:{title:t.modalTitle},on:{"on-cancel":function(e){return t.cancelDetail("gift")}},model:{value:t.showGiftDetailModal,callback:function(e){t.showGiftDetailModal=e},expression:"showGiftDetailModal"}},[i("Form",{attrs:{model:t.giftModer,"label-width":80}},[i("div",{staticClass:"alignLeft"},[i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("礼物等级"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t._f("giftLevel")(t.giftDetailModer.gift_level)))])]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("礼物排序"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.giftDetailModer.gift_order))]),t._v(" "),i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("礼物名称"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.giftDetailModer.gift_name))])]),t._v(" "),i("div",{staticClass:"marginBottom30",staticStyle:{position:"relative"}},[i("label",{staticClass:"searchLabel uploadImgLabel"},[t._v("礼物图片"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("div",{staticClass:"detailImg"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.giftDetailModer.gift_picture_path,expression:"giftDetailModer.gift_picture_path"}],staticClass:"uploadImgPic",attrs:{src:t.imgUrl+t.giftDetailModer.gift_picture_path}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.giftDetailModer.gift_picture_path,expression:"!giftDetailModer.gift_picture_path"}],staticStyle:{"line-height":"30px"}},[t._v("无")])]),t._v(" "),i("label",{staticClass:"searchLabel"},[t._v("礼物价格"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.giftDetailModer.gift_price))])]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("附带宝箱名:")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.giftDetailModer.adjunct_box_name))]),t._v(" "),i("label",{staticClass:"searchLabel"},[t._v("倒计时:")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.giftDetailModer.count_down))])]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("礼物特效"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.giftDetailModer.special_effect_name))]),t._v(" "),i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("\n\t\t          \t\t\t\t礼物触发特效"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.giftDetailModer.special_trigger_effect_name))])]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("触发特效礼物数量:")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.giftDetailModer.gift_trigger_special_effects_time))]),t._v(" "),i("label",{staticClass:"searchLabel"},[t._v("是否上架"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.giftDetailModer.putaway_status,expression:"giftDetailModer.putaway_status"}],staticClass:"detailSpan"},[t._v("已上架")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.giftDetailModer.putaway_status,expression:"!giftDetailModer.putaway_status"}],staticClass:"detailSpan"},[t._v("已下架")])])])]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:function(e){return t.cancelDetail("gift")}}},[t._v("取消")])],1)],1)],t._v(" "),[i("modal",{attrs:{title:t.modalTitle},on:{"on-cancel":function(e){return t.cancelDetail("treasure")}},model:{value:t.showTreasureDetailModal,callback:function(e){t.showTreasureDetailModal=e},expression:"showTreasureDetailModal"}},[i("Form",{attrs:{model:t.giftModer,"label-width":80}},[i("div",{staticClass:"alignLeft"},[i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("礼物等级"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t._f("giftLevel")(t.treasureDetailModer.gift_level)))])]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel"},[t._v("宝箱排序"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.treasureDetailModer.gift_order))]),t._v(" "),i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("宝箱名称"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.treasureDetailModer.gift_name))])]),t._v(" "),i("div",{staticClass:"marginBottom30",staticStyle:{position:"relative"}},[i("label",{staticClass:"searchLabel uploadImgLabel"},[t._v("宝箱图片"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("div",{staticClass:"detailImg"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.treasureDetailModer.gift_picture_path,expression:"treasureDetailModer.gift_picture_path"}],staticClass:"uploadImgPic",attrs:{src:t.imgUrl+t.treasureDetailModer.gift_picture_path}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.treasureDetailModer.gift_picture_path,expression:"!treasureDetailModer.gift_picture_path"}],staticStyle:{"line-height":"30px"}},[t._v("无")])]),t._v(" "),i("label",{staticClass:"searchLabel"},[t._v("宝箱关闭特效"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.treasureDetailModer.special_effect_name))])]),t._v(" "),i("div",{staticClass:"marginBottom30"},[i("label",{staticClass:"searchLabel",attrs:{for:"gift_name"}},[t._v("宝箱打开特效:")]),t._v(" "),i("span",{staticClass:"detailSpan"},[t._v(t._s(t.treasureDetailModer.special_trigger_effect_name))]),t._v(" "),i("label",{staticClass:"searchLabel"},[t._v("是否上架"),i("span",{staticClass:"red"},[t._v("*")]),t._v(":")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.treasureDetailModer.putaway_status,expression:"treasureDetailModer.putaway_status"}],staticClass:"detailSpan"},[t._v("已上架")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.treasureDetailModer.putaway_status,expression:"!treasureDetailModer.putaway_status"}],staticClass:"detailSpan"},[t._v("已下架")])]),t._v(" "),i("div",{staticStyle:{"font-size":"18px"}},[i("span",[t._v("宝箱中的礼物")]),t._v(" "),i("span",{staticClass:"fr"},[t._v("合计："+t._s(t.treasureDetailModer.gift_price)+"元")])]),t._v(" "),i("Table",{attrs:{stripe:"",border:"",columns:t.treasureDetailColum,data:t.treasureDetailModer.gifts}})],1)]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:function(e){return t.cancelDetail("treasure")}}},[t._v("取消")])],1)],1)]],2)},staticRenderFns:[]},n=i("C7Lr")(l,o,!1,null,null,null);e.default=n.exports},hYS1:function(t,e,i){"use strict";var a={name:"vue-upload",props:{accept:{type:String,default:""},url:{type:String,default:""},fileNumLimit:{type:Number,default:100},fileSingleSizeLimit:{type:Number,default:5242880},formData:{type:Object,default:null},keyGenerator:{type:Function,default:function(t){return(new Date).getTime()+"."+t.name}},multiple:{type:Boolean,default:!1},uploadButton:{type:String,default:""}},data:function(){return{uploader:null}},mounted:function(){this.initWebUpload()},methods:{initWebUpload:function(){var t=this;this.uploader=WebUploader.create({auto:!0,swf:"/static/third_lib/webuploader/Uploader.swf",server:this.url,pick:{id:this.uploadButton,multiple:this.multiple,label:""},accept:this.getAccept(this.accept),threads:1,fileNumLimit:this.fileNumLimit,fileSingleSizeLimit:this.fileSingleSizeLimit,formData:this.formData,chunked:!0,chunkSize:2048e3,duplicate:!1,compress:!1}),this.uploader.on("beforeFileQueued",function(e){t.$emit("beforeFileChange",e)}),this.uploader.on("fileQueued",function(e){t.$emit("fileChange",e)}),this.uploader.on("uploadStart",function(e){t.$emit("start",e)}),this.uploader.on("uploadProgress",function(e,i){t.$emit("progress",e,i)}),this.uploader.on("uploadSuccess",function(e,i){t.$emit("success",e,i)}),this.uploader.on("uploadError",function(e,i){t.$emit("uploadError",e,i)}),this.uploader.on("error",function(e){var i="";i="F_EXCEED_SIZE"===e?"文件大小不能超过"+t.fileSingleSizeLimit/1024e3+"M":"Q_EXCEED_NUM_LIMIT"===e?"文件上传已达到最大上限数":"上传出错！请检查后重新上传！错误代码"+e,console.log("errorMessage="+i),t.$emit("error",i)}),this.uploader.on("uploadComplete",function(e,i){console.log(i),t.$emit("complete",e,i)})},upload:function(t){this.uploader.upload(t)},stop:function(t){this.uploader.stop(t)},cancelFile:function(t){this.uploader.cancelFile(t)},removeFile:function(t,e){this.uploader.removeFile(t,e)},getAccept:function(t){switch(t){case"text":return{title:"Texts",exteensions:"doc,docx,xls,xlsx,ppt,pptx,pdf,txt",mimeTypes:".doc,docx,.xls,.xlsx,.ppt,.pptx,.pdf,.txt"};case"video":return{title:"Videos",extensions:"mp3,wma,ogg,m4a,amr",mimeTypes:"audio/*,audio/amr-wb"};case"image":return{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"};default:return t}}}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vue-upload"})},staticRenderFns:[]};var r=i("C7Lr")(a,s,!1,function(t){i("1UHf")},null,null);e.a=r.exports}});