webpackJsonp([10],{"u/9U":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("mowP"),a={mixins:[{data:function(){var e=this;return{userId:"",nickname:"",picked_type:"1",user_level:"-1",last_request_time:0,loading:!0,userRecommendList:[],userRecommendColum:[{title:"序号",key:"sort_order",align:"center"},{title:"用户ID",key:"user_id",align:"center"},{title:"用户昵称",key:"nickname",align:"center"},{title:"声音数",key:"voice_count",align:"center"},{title:"关注数",key:"follow_count",align:"center"},{title:"好友数",key:"friend_count",align:"center"},{title:"粉丝数",key:"follower_count",align:"center"},{title:"专辑数",key:"album_count",align:"center"},{title:"推荐版块",key:"picked_type",align:"center",render:function(e,t){return e("span",Object(s.userRecommendPickedType)(t.row.picked_type))}},{title:"用户类型",key:"level",align:"center",render:function(e,t){return e("span",Object(s.userLevel)(t.row.level,t.row.is_copyright_owner))}},{title:"状态",key:"status",align:"center",render:function(e,t){return e("span",Object(s.userStatus)(t.row.status))}},{title:"推荐时间",key:"last_update_time",align:"center",render:function(e,t){return e("span",Object(s.formatTime)(1e3*t.row.last_update_time,"YMDHMS"))}},{title:"操作",key:"action",width:180,align:"center",render:function(t,i){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editModalShow(i.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteModalShow(i.row)}}},"删除")])}}],pageSize:15,totalCount:0,currentPage:1,editModel:!1,edit_userId:0,sort_order:null,edit_picked_type:"",deleteModal:!1,delete_userId:0,hasPickedHot:!1,hasPickedNew:!1,hasPickedS2:!1,delete_picked_type:[]}},created:function(){this.getUserRecommend()},methods:{getUserRecommend:function(){var e=this,t={uuid:this.$api.uuid,page:this.currentPage,per_page:this.pageSize,last_request_time:this.last_request_time,user_id:this.userId,nickname:this.nickname,picked_type:this.picked_type,level:this.user_level};this.$api.getUserRecommend(t).then(function(t){e.loading=!1,200==t.code?(e.totalCount=t.data.total_count,e.currentPage=t.data.page,e.userRecommendList=t.data.list,e.last_request_time=t.data.last_request_time):e.$Message.error(t.msg)})},searchData:function(){this.currentPage=1,this.loading=!0,this.getUserRecommend()},pageChange:function(e){this.currentPage=e,this.loading=!0,this.getUserRecommend()},editModalShow:function(e){this.editModel=!0,this.edit_userId=e.user_id,this.sort_order=e.sort_order,this.edit_picked_type=e.picked_type},cancelEdit:function(){this.editModel=!1,this.edit_userId=0,this.edit_picked_type=""},confirmEdit:function(){var e=this;if(null==this.sort_order)this.$Message.error("请输入排序");else{var t={uuid:this.$api.uuid,user_id:this.edit_userId,sort_order:this.sort_order,picked_type:this.picked_type};this.$api.editUserRecommend(t).then(function(t){200==t.code?(e.$Message.success("修改成功"),e.editModel=!1,e.edit_userId=0,e.edit_picked_type="",e.loading=!0,e.getUserRecommend()):e.$Message.error(t.msg)})}},deleteModalShow:function(e){this.deleteModal=!0,this.delete_userId=e.user_id,this.delete_picked_type=[],e.picked_type="String"==typeof e.picked_type?e.picked_type:e.picked_type.toString(),e.picked_type.indexOf("1")>=0&&(this.hasPickedHot=!0),e.picked_type.indexOf("2")>=0&&(this.hasPickedNew=!0),e.picked_type.indexOf("3")>=0&&(this.hasPickedS2=!0)},cancelDelete:function(){this.deleteModal=!1,this.delete_userId=0,this.delete_picked_type=[]},confirmDelete:function(){var e=this;if(""==this.delete_picked_type.join(","))this.$Message.error("请选择取消推荐的版块");else{var t={uuid:this.$api.uuid,user_id:this.delete_userId,picked_type:"1"};this.deleteModal=!1,this.$api.deleteUserRecommend(t).then(function(t){200==t.code?(e.$Message.success("删除成功"),e.deleteModal=!1,e.delete_userId=0,e.delete_picked_type=[],e.currentPage=1,e.loading=!0,e.getUserRecommend()):e.$Message.error("删除失败")})}}}}]},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"userRecommend"},[i("div",{staticClass:"marginBottom30 flex clear"},[i("div",[i("label",{attrs:{for:"userId"}},[e._v("用户ID")]),e._v(" "),i("Input",{attrs:{id:"userId",placeholder:"查询用户ID"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1),e._v(" "),i("div",[i("label",{attrs:{for:"nickname"}},[e._v("用户昵称")]),e._v(" "),i("Input",{attrs:{id:"nickname",placeholder:"查询用户昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1),e._v(" "),i("div",{staticClass:"flex"},[i("label",{staticClass:"searchLabel",attrs:{for:"pickedType"}},[e._v("推荐版块")]),e._v(" "),i("Select",{staticClass:"searchSelect",attrs:{id:"pickedType"},model:{value:e.picked_type,callback:function(t){e.picked_type=t},expression:"picked_type"}},[i("Option",{key:"1",attrs:{value:"1"}},[e._v("热门主播")]),e._v(" "),i("Option",{key:"2",attrs:{value:"2"}},[e._v("新晋主播")]),e._v(" "),i("Option",{key:"3",attrs:{value:"3"}},[e._v("S2金牌主播")])],1)],1),e._v(" "),i("div",{staticClass:"flex"},[i("label",{staticClass:"searchLabel",attrs:{for:"userLevel"}},[e._v("用户类型")]),e._v(" "),i("Select",{staticClass:"searchSelect",attrs:{id:"userLevel"},model:{value:e.user_level,callback:function(t){e.user_level=t},expression:"user_level"}},[i("Option",{key:"-1",attrs:{value:"-1"}},[e._v("全部")]),e._v(" "),i("Option",{key:"1",attrs:{value:"1"}},[e._v("电台")]),e._v(" "),i("Option",{key:"2",attrs:{value:"2"}},[e._v("资源账号")]),e._v(" "),i("Option",{key:"3",attrs:{value:"3"}},[e._v("版权方")])],1)],1),e._v(" "),i("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.searchData}},[e._v("查询")])],1),e._v(" "),i("Table",{attrs:{stripe:"",border:"",loading:e.loading,columns:e.userRecommendColum,data:e.userRecommendList}}),e._v(" "),i("Page",{staticClass:"paging",attrs:{total:e.totalCount,"page-size":e.pageSize,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}}),e._v(" "),[i("Modal",{attrs:{title:"用户编辑"},model:{value:e.editModel,callback:function(t){e.editModel=t},expression:"editModel"}},[i("div",{staticClass:"alignCenter"},[i("p",{staticClass:"popupShow"},[i("label",{staticClass:"showLabel"},[e._v("用户ID：")]),e._v(" "),i("Input",{attrs:{disabled:""},model:{value:e.edit_userId,callback:function(t){e.edit_userId=t},expression:"edit_userId"}})],1),e._v(" "),i("p",{staticClass:"popupShow"},[i("label",{staticClass:"showLabel",attrs:{for:"sortOrder"}},[e._v("序号：")]),e._v(" "),i("InputNumber",{attrs:{id:"sortOrder",min:0,precision:0},model:{value:e.sort_order,callback:function(t){e.sort_order=t},expression:"sort_order"}})],1)]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:e.cancelEdit}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"success"},on:{click:e.confirmEdit}},[e._v("确认")])],1)])],e._v(" "),[i("Modal",{attrs:{title:"删除用户推荐"},model:{value:e.deleteModal,callback:function(t){e.deleteModal=t},expression:"deleteModal"}},[i("div",{staticClass:"alignCenter"},[i("label",[e._v("取消推荐版块：")]),e._v(" "),i("CheckboxGroup",{staticStyle:{display:"inline-block"},model:{value:e.delete_picked_type,callback:function(t){e.delete_picked_type=t},expression:"delete_picked_type"}},[e.hasPickedHot?i("Checkbox",{attrs:{label:"1"}},[e._v("热门主播")]):e._e(),e._v(" "),e.hasPickedNew?i("Checkbox",{attrs:{label:"2"}},[e._v("新晋主播")]):e._e(),e._v(" "),e.hasPickedS2?i("Checkbox",{attrs:{label:"3"}},[e._v("S2金牌主播")]):e._e()],1)],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:e.cancelDelete}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"error"},on:{click:e.confirmDelete}},[e._v("删除")])],1)])]],2)},staticRenderFns:[]};var l=i("C7Lr")(a,r,!1,function(e){i("xI85")},null,null);t.default=l.exports},xI85:function(e,t){}});