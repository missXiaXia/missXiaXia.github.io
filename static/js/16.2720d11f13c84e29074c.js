webpackJsonp([16],{"2d0u":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("mowP"),a={mixins:[{data:function(){var e=this;return{pageSize:15,currentPage:1,last_request_time:0,voiceId:"",voiceName:"",totalCount:0,loading:!0,voiceRecommendList:[],voiceRecommendColum:[{title:"序号",key:"sort_order",align:"center"},{title:"声音ID",key:"voice_id",align:"center"},{title:"声音名称",key:"voice_name",align:"center"},{title:"播放试听",align:"center",render:function(t,i){return i.row.final_voice_file_md5?t("Icon",{props:{type:"play"},style:{width:"30px",height:"30px",lineHeight:"30px"},on:{click:function(){e.playAudio(i)}}}):t("span","声音地址不存在")}},{title:"播放数",key:"play_count",align:"center"},{title:"转发数",key:"forward_count",align:"center"},{title:"喜欢数",key:"like_count",align:"center"},{title:"评论数",key:"comment_count",align:"center"},{title:"发布者昵称",key:"nickname",align:"center"},{title:"推荐时间",key:"create_time",align:"center",render:function(e,t){return e("span",Object(o.formatTime)(1e3*t.row.create_time,"YMDHMS"))}},{title:"推荐版块",align:"center",render:function(e,t){return e("span","热门声音")}},{title:"操作",key:"action",width:180,align:"center",render:function(t,i){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editModalShow(i.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteModalShow(i.row)}}},"删除")])}}],editModel:!1,edit_voiceId:0,sort_order:null,deleteModal:!1,delete_voiceId:0,delete_picked:!1}},created:function(){this.getVoiceRecommend()},methods:{getVoiceRecommend:function(){var e=this,t={uuid:this.$api.uuid,page:this.currentPage,per_page:this.pageSize,last_request_time:this.last_request_time,voice_id:this.voiceId,voice_name:this.voiceName};this.$api.getVoiceRecommend(t).then(function(t){e.loading=!1,200==t.code?(e.totalCount=t.data.total_count,e.currentPage=t.data.page,e.voiceRecommendList=t.data.list,e.last_request_time=t.data.last_request_time):e.$Message.error(t.msg)})},playAudio:function(e){$(".ivu-icon-play").css("color","#495060"),$(".ivu-icon-play").eq(e.index).css("color","#00ff00");var t=fileUrl+"uploads/audio/voice/md5/"+e.row.final_voice_file_md5;document.getElementById("voicePlay").src=t},searchData:function(){this.currentPage=1,this.loading=!0,this.getVoiceRecommend()},pageChange:function(e){this.currentPage=e,this.loading=!0,this.getVoiceRecommend()},editModalShow:function(e){this.editModel=!0,this.edit_voiceId=e.voice_id,this.sort_order=e.sort_order},cancelEdit:function(){this.editModel=!1,this.edit_voiceId=0},confirmEdit:function(){var e=this;if(null==this.sort_order)this.$Message.error("请输入排序");else{var t={uuid:this.$api.uuid,voice_id:this.edit_voiceId,sort_order:this.sort_order};this.$api.editVoiceRecommend(t).then(function(t){200==t.code?(e.$Message.success("修改成功"),e.editModel=!1,e.edit_voiceId=0,e.loading=!0,e.getVoiceRecommend()):e.$Message.error(t.msg)})}},deleteModalShow:function(e){this.deleteModal=!0,this.delete_voiceId=e.voice_id,this.delete_picked=!1},cancelDelete:function(){this.deleteModal=!1,this.delete_voiceId=0},confirmDelete:function(){var e=this;if(0==this.delete_picked)this.$Message.error("请选择取消推荐的版块");else{var t={uuid:this.$api.uuid,voice_id:this.delete_voiceId,recommend:"1"};this.deleteModal=!1,this.$api.deleteVoiceRecommend(t).then(function(t){200==t.code?(e.$Message.success("删除成功"),e.deleteModal=!1,e.delete_voiceId=0,e.currentPage=1,e.loading=!0,e.getVoiceRecommend()):e.$Message.error("删除失败")})}}}}]},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"voiceRecommend"},[i("div",{staticClass:"marginBottom30 flex clear"},[i("div",[i("label",{attrs:{for:"voiceId"}},[e._v("声音ID")]),e._v(" "),i("Input",{attrs:{id:"voiceId",placeholder:"查询声音ID"},model:{value:e.voiceId,callback:function(t){e.voiceId=t},expression:"voiceId"}})],1),e._v(" "),i("div",[i("label",{attrs:{for:"voiceName"}},[e._v("声音名称")]),e._v(" "),i("Input",{attrs:{id:"voiceName",placeholder:"查询声音名称"},model:{value:e.voiceName,callback:function(t){e.voiceName=t},expression:"voiceName"}})],1),e._v(" "),i("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.searchData}},[e._v("查询")])],1),e._v(" "),i("audio",{attrs:{id:"voicePlay",autoplay:"",controls:""}}),e._v(" "),i("Table",{attrs:{stripe:"",border:"",loading:e.loading,columns:e.voiceRecommendColum,data:e.voiceRecommendList}}),e._v(" "),i("Page",{staticClass:"paging",attrs:{total:e.totalCount,"page-size":e.pageSize,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}}),e._v(" "),[i("Modal",{attrs:{title:"声音编辑"},model:{value:e.editModel,callback:function(t){e.editModel=t},expression:"editModel"}},[i("div",{staticClass:"alignCenter"},[i("p",{staticClass:"popupShow"},[i("label",{staticClass:"showLabel"},[e._v("声音ID：")]),e._v(" "),i("Input",{attrs:{disabled:""},model:{value:e.edit_voiceId,callback:function(t){e.edit_voiceId=t},expression:"edit_voiceId"}})],1),e._v(" "),i("p",{staticClass:"popupShow"},[i("label",{staticClass:"showLabel",attrs:{for:"sortOrder"}},[e._v("序号：")]),e._v(" "),i("InputNumber",{attrs:{id:"sortOrder",min:0,precision:0},model:{value:e.sort_order,callback:function(t){e.sort_order=t},expression:"sort_order"}})],1)]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:e.cancelEdit}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"success"},on:{click:e.confirmEdit}},[e._v("确认")])],1)])],e._v(" "),[i("Modal",{attrs:{title:"删除声音推荐"},model:{value:e.deleteModal,callback:function(t){e.deleteModal=t},expression:"deleteModal"}},[i("div",{staticClass:"alignCenter"},[i("label",[e._v("取消推荐版块：")]),e._v(" "),i("Checkbox",{model:{value:e.delete_picked,callback:function(t){e.delete_picked=t},expression:"delete_picked"}},[e._v("热门声音")])],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticClass:"borderNone",on:{click:e.cancelDelete}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"error"},on:{click:e.confirmDelete}},[e._v("删除")])],1)])]],2)},staticRenderFns:[]};var n=i("C7Lr")(a,c,!1,function(e){i("wS44")},null,null);t.default=n.exports},wS44:function(e,t){}});