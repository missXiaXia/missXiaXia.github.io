webpackJsonp([15],{iyI8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mowP"),i={mixins:[{inject:["reload"],data:function(){var t=this;return{currentPage:1,pageSize:15,totalCount:0,id:null,title:null,nickname:"",start_time:null,end_time:null,task_status:"-1",task_allowance:null,is_top:"-1",recommend_type:"-1",taskList:[],recommend_type_list:[],deleteModal:!1,deleteId:null,columns:[{title:"任务编号",key:"id",align:"center"},{title:"任务标题",key:"title",align:"center",width:300},{title:"发布人",key:"nickname",align:"center"},{title:"任务发布时间",key:"create_time",align:"center",render:function(t,e){return t("span",Object(s.formatTime)(1e3*e.row.create_time,"YMDHMS"))}},{title:"任务截止时间",key:"end_time",align:"center",render:function(t,e){return t("span",Object(s.formatTime)(1e3*e.row.end_time,"YMDHMS"))}},{title:"任务热度(查看人数)",key:"",align:"center"},{title:"任务领取人数",key:"task_allowance",align:"center",render:function(t,e){return t("span",10-e.row.task_allowance)}},{title:"是否置顶",key:"is_top",align:"center",render:function(t,e){return t("span",Object(s.taskIsTop)(e.row.is_top))}},{title:"推荐标签",key:"recommend_type",align:"center"},{title:"任务文稿",key:"fav_anchor_num",align:"center"},{title:"任务状态",key:"task_status",align:"center",render:function(t,e){return t("span",Object(s.taskStatus)(e.row.task_status,e.row.end_time))}},{title:"操作",key:"action",width:180,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.taskEdit(a.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.taskDelete(a.row.id)}}},"删除")])}}]}},created:function(){this._getTaskListInfo(),this._getRecommendType()},methods:{refreshPage:function(){this.reload()},_getTaskListInfo:function(){var t=this,e={uuid:this.$api.uuid,page:this.currentPage,per_page:this.pageSize,id:this.id,title:this.title,nickname:this.nickname,start_time:this.start_time,end_time:this.end_time,task_allowance:this.task_allowance,task_status:this.task_status,is_top:this.is_top,recommend_type:this.recommend_type,sort_type:null,sort_by:""};this.$api.getTaskListInfo(e).then(function(e){200==e.code?(t.taskList=e.data.list,t.totalCount=e.data.total_count,t.currentPage=e.data.page):t.$Message.error(e.msg)})},_getRecommendType:function(){var t=this,e={uuid:this.$api.uuid,page:this.currentPage,per_page:this.pageSize,sort_type:null,sort_by:""};this.$api.getRecommendType(e).then(function(e){200==e.code?t.recommend_type_list=e.data.list:t.$Message.error(e.msg)})},taskEdit:function(t){this.$router.push({name:"task_edit",params:{id:t.id,from:"fromTaskList"}})},taskDelete:function(t){this.deleteId=t,this.deleteModal=!0},cancel:function(){this.deleteModal=!1},confirmDelete:function(){var t=this,e={uuid:this.$api.uuid,id:this.deleteId};this.$api.delTaskInfo(e).then(function(e){200==e.code?(t.$Message.success("删除成功"),t.deleteModal=!1,t._getTaskListInfo()):t.$Message.error(e.msg)})},search:function(){this.currentPage=1,this._getTaskListInfo()},changePage:function(t){this.currentPage=t,this._getTaskListInfo()}}}]},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"writerManage"},[a("div",{staticClass:"but"},[a("Button",{staticClass:"fr marginRight30",attrs:{type:"primary"},on:{click:t.refreshPage}},[t._v("刷新")])],1),t._v(" "),a("div",{staticClass:"marginBottom30 flex flexWrap"},[a("div",{staticClass:"marginBottom20"},[a("label",{attrs:{for:"taskId"}},[t._v("任务编号")]),t._v(" "),a("Input",{attrs:{id:"taskId",placeholder:"查询任务编号"},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}})],1),t._v(" "),a("div",[a("label",{attrs:{for:"taskTitle"}},[t._v("任务标题")]),t._v(" "),a("Input",{attrs:{id:"taskTitle",placeholder:"查询任务标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),a("div",[a("label",{attrs:{for:"publisher"}},[t._v("发布人")]),t._v(" "),a("Input",{attrs:{id:"publisher",placeholder:"查询发布人"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),t._v(" "),a("div",[a("label",{attrs:{for:"taskPublishTime"}},[t._v("任务发布时间")]),t._v(" "),a("Input",{attrs:{id:"taskPublishTime",placeholder:"查询任务发布时间"},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1),t._v(" "),a("div",[a("label",{attrs:{for:"taskStopTime"}},[t._v("任务截止时间")]),t._v(" "),a("Input",{attrs:{id:"taskStopTime",placeholder:"查询任务截止时间"},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1),t._v(" "),a("div",[a("label",{attrs:{for:"taskReceiveNum"}},[t._v("任务领取人数")]),t._v(" "),a("Input",{attrs:{id:"taskReceiveNum",placeholder:"查询任务领取人数"},model:{value:t.task_allowance,callback:function(e){t.task_allowance=e},expression:"task_allowance"}})],1),t._v(" "),a("div",{staticClass:"flex marginRight20"},[a("label",{staticClass:"searchLabel",attrs:{for:"checkStatus"}},[t._v("是否置顶")]),t._v(" "),a("Select",{staticClass:"searchSelect",attrs:{id:"checkStatus"},model:{value:t.is_top,callback:function(e){t.is_top=e},expression:"is_top"}},[a("Option",{attrs:{value:"-1"}},[t._v("全部")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("是")]),t._v(" "),a("Option",{attrs:{value:"0"}},[t._v("否")])],1)],1),t._v(" "),a("div",{staticClass:"flex marginRight20"},[a("label",{staticClass:"searchLabel",attrs:{for:"checkStatus"}},[t._v("推荐标签")]),t._v(" "),a("Select",{staticClass:"searchSelect",attrs:{id:"checkStatus"},model:{value:t.recommend_type,callback:function(e){t.recommend_type=e},expression:"recommend_type"}},[a("Option",{attrs:{value:"-1"}},[t._v("全部")]),t._v(" "),a("Option",{attrs:{value:"0"}},[t._v("无")]),t._v(" "),t._l(t.recommend_type_list,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})],2)],1),t._v(" "),a("div",{staticClass:"flex marginRight20"},[a("label",{staticClass:"searchLabel",attrs:{for:"checkStatus"}},[t._v("任务状态")]),t._v(" "),a("Select",{staticClass:"searchSelect",attrs:{id:"checkStatus"},model:{value:t.task_status,callback:function(e){t.task_status=e},expression:"task_status"}},[a("Option",{attrs:{value:"-1"}},[t._v("全部")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("进行中")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("已结束")]),t._v(" "),a("Option",{attrs:{value:"6"}},[t._v("被终止")])],1)],1),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("查询")])],1),t._v(" "),a("Table",{attrs:{stripe:"",border:"",columns:t.columns,data:t.taskList}}),t._v(" "),a("Page",{staticClass:"paging",attrs:{total:t.totalCount,"page-size":t.pageSize,"show-total":"","show-elevator":""},on:{"on-change":t.changePage}}),t._v(" "),[a("Modal",{attrs:{title:"文稿删除",width:"300"},model:{value:t.deleteModal,callback:function(e){t.deleteModal=e},expression:"deleteModal"}},[a("div",{staticClass:"alignCenter"},[a("Icon",{staticClass:"fontBigSize",staticStyle:{color:"#f60"},attrs:{type:"information-circled"}}),t._v(" "),a("span",{staticClass:"fontMiddleSize"},[t._v("确定删除该文稿？？？")])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"borderNone",on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"error"},on:{click:t.confirmDelete}},[t._v("确定")])],1)])]],2)},staticRenderFns:[]};var l=a("C7Lr")(i,n,!1,function(t){a("qkX8")},null,null);e.default=l.exports},qkX8:function(t,e){}});